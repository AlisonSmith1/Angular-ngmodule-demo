<div class="analyticInsights">
  <h3>ANALYTICS & INSIGHTS</h3>
  <span class="tag" [class.syncing]="true">REAL-TIME</span>

  <div class="card3">
    @if (stats$ | async; as data) {
    <div class="insight-card">
      <div class="metric">
        <span class="label">Efficiency Score</span>
        <span class="value" [class]="data.status">{{ data.score }}</span>
        <span class="trend" [class.up]="data.isUpward" [class.down]="!data.isUpward">
          {{ data.isUpward ? '↑' : '↓' }} {{ data.trendPercentage }}%
        </span>
      </div>

      <div class="mini-chart">
        <canvas id="efficiencyChart"></canvas>
      </div>

      <hr class="misty-line" />

      <div class="ai-recommendation" [class]="data.status">
        <i class="ai-icon"></i>
        <p>{{ recommendation$ | async }}</p>
      </div>
    </div>
    } @else {
    <div class="loading-overlay">正在分析神經網路數據...</div>
    }
  </div>
</div>
